# yaml-language-server: $schema=../bundle_schema.json
resources:
  apps:
    genie-slack-app:
      name: "genie-slck-${workspace.current_user.domain_friendly_name}"
      source_code_path: "../src"
      description: "Slack App for communicating with genie apis"
      resources:
        - name: genie-slck-${workspace.current_user.domain_friendly_name}
          database:
            database_name: ${resources.database_catalogs.genie_slack_database.database_name}
            instance_name: ${resources.database_instances.genie_slack_lakebase.name}
            permission: CAN_CONNECT_AND_CREATE
        - name: slack-bot-token-app
          secret:
            key: token_app
            permission: READ
            scope: genie-slck-${workspace.current_user.domain_friendly_name}
        - name: slack-bot-token-bot
          secret:
            key: token_bot
            permission: READ
            scope: genie-slck-${workspace.current_user.domain_friendly_name}
